# 観戦統計の開閉トグル追加 議事録

**日付**: 2026-03-02

---

## 質問

jleague_watching_calendarの開発をおこないます。
議事録から過去の状況は確認してください。

シーズン詳細、チーム詳細に改善を加えたく、観戦統計を開閉して簡易表示に切り替えるを検討したいです（ページ内の観戦統計が占める割合が半分以上なのが気になってきた）

---

## 回答

*議事録・season_detail_screen.dart・team_detail_screen.dart・match_list_statistics_widget.dart を確認*

観戦統計の表示方式と詳細情報トグルとの独立制御について確認し、以下の方針で実装しました。

- 観戦統計に独立した開閉トグルを追加
- デフォルトは折りたたまれた状態（非表示）
- 詳細情報（得点者・メモ）のスイッチとは別に制御

#### season_detail_screen.dart

- `_showStatistics = false` を追加
- 観戦統計エリアを `InkWell` でタップ可能なヘッダー行に変更（`bar_chart` アイコン + `expand_less/expand_more` 矢印）
- ヘッダータップで `_showStatistics` をトグルし、`true` のときのみ `MatchListStatisticsWidget` を表示

#### team_detail_screen.dart

- season_detail_screen.dart と同様の変更を適用
- `_showStatistics = false` を追加
- 観戦統計エリアに同様の開閉トグルを追加

*flutter analyze で検証 → 新規エラーなし（既存 info 3件のみ）*

---

## 質問

良さそうです。
「詳細情報を表示」と「観戦統計」の順序を逆にしてもよいかもです（詳細情報がリストに反映される設定だが、間に直接は関係ない統計の情報が開閉機能付きで挟まるようになったので）

---

## 回答

*season_detail_screen.dart・team_detail_screen.dart を修正*

両画面で「観戦統計」と「詳細情報を表示」の順序を入れ替えました。

変更後の並び順（両画面共通）：

1. 予定を追加ボタン
2. **観戦統計**（折りたたみトグル）
3. **詳細情報を表示**（スイッチ）
4. 試合一覧

サマリー情報（統計）が先、リスト各行への表示設定（詳細情報）が後という流れになりました。

*flutter analyze で検証 → 新規エラーなし（既存 info 3件のみ）*

---

## 変更ファイル

- **変更**:
  - `lib/screens/season_detail_screen.dart` - 観戦統計の開閉トグルを追加、順序を変更
  - `lib/screens/team_detail_screen.dart` - 観戦統計の開閉トグルを追加、順序を変更

---

**最終結果**:
- ✅ 観戦統計がデフォルト折りたたみ状態になり、ページの大部分が試合リストになった
- ✅ 観戦統計ヘッダーをタップすることで統計カードを展開・折りたたみできる
- ✅ 詳細情報トグルと観戦統計トグルが独立して操作可能
- ✅ 観戦統計 → 詳細情報を表示の順序に変更
- ✅ flutter analyze で新規エラーなし
